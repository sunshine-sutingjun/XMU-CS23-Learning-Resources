(self.webpackChunklms=self.webpackChunklms||[]).push([[30138],{30138:function(e,t,n){"use strict";n.r(t);n(928660),n(67181);var r=n(383228),o=n(383228);n(962680),n(383228),n(261139),n(48944),n(525733),r.fn.load=function(e){o(window).on("load",e)},n(862914),n(522530),n(508616),n(850398),n(984420),n(519268),n(899517),n(781284),n(384500),Foundation.global.namespace="",n(730381),n(774152),n(83839),n(565639),n(102850),n(690204),n(210676),n(736650),n(496e3),n(796130),n(691285),n(667089),n(426891),n(526400),n(386227),n(216208),n(299595),n(249023),n(730947),n(604007),n(60773),n(767177),n(487020),n(858709),n(620954),n(856644),n(678736),n(841812),n(464261),n(350808),n(993776),window.qrcode=n(923776),n(403228),n(958297),n(710261),n(230039)},249023:function(e,t,n){var r=n(261139),o=n(383228);r.module("ui.select2",[]).value("uiSelect2Config",{}).directive("uiSelect2",["uiSelect2Config","$timeout",function(e,t){var n={};return e&&r.extend(n,e),{require:"ngModel",priority:2,compile:function(e,i){var a,s,l,c=e.is("select"),u=r.isDefined(i.multiple);return e.is("select")&&(s=e.find("optgroup[ng-repeat], optgroup[data-ng-repeat], option[ng-repeat], option[data-ng-repeat]")).length&&(l=s.attr("ng-repeat")||s.attr("data-ng-repeat"),a=o.trim(l.split("|")[0]).split(" ").pop()),function(e,o,s,l){var d=r.extend({},n,e.$eval(s.uiSelect2)),p=function(e){var t;return d.simple_tags?(t=[],r.forEach(e,(function(e,n){t.push(e.id)}))):t=e,t};if(c?(delete d.multiple,delete d.initSelection):u&&(d.multiple=!0),l&&(e.$watch(i.ngModel,(function(e,t){e&&e!==t&&l.$render()}),!0),l.$render=function(){if(c)o.select2("val",l.$viewValue);else if(d.multiple){var e=l.$viewValue;r.isString(e)&&(e=e.split(",")),o.select2("data",(n=[],(t=e)?(d.simple_tags?(n=[],r.forEach(t,(function(e,t){n.push({id:e,text:e})}))):n=t,n):n))}else r.isObject(l.$viewValue)?o.select2("data",l.$viewValue):l.$viewValue?o.select2("val",l.$viewValue):o.select2("data",null);var t,n},a&&e.$watch(a,(function(e,n,i){r.equals(e,n)||t((function(){o.select2("val",l.$viewValue),o.trigger("change"),e&&!n&&l.$setPristine&&l.$setPristine(!0)}))})),l.$parsers.push((function(e){return o.prev().toggleClass("ng-invalid",!l.$valid).toggleClass("ng-valid",l.$valid).toggleClass("ng-invalid-required",!l.$valid).toggleClass("ng-valid-required",l.$valid).toggleClass("ng-dirty",l.$dirty).toggleClass("ng-pristine",l.$pristine),e})),!c&&(o.bind("change",(function(t){t.stopImmediatePropagation(),e.$$phase||e.$root.$$phase||e.$apply((function(){l.$setViewValue(p(o.select2("data")))}))})),d.initSelection))){var f=d.initSelection;d.initSelection=function(e,t){f(e,(function(e){l.$setViewValue(p(e)),t(e)}))}}s.$observe("disabled",(function(e){o.select2("enable",!e)})),s.$observe("readonly",(function(e){o.select2("readonly",!!e)})),s.ngMultiple&&e.$watch(s.ngMultiple,(function(e){s.$set("multiple",!!e),o.select2(d)})),t((function(){o.select2(d),o.val(l.$viewValue),l.$render(),d.initSelection||c||l.$setViewValue(p(o.select2("data")))}))}}}}])},525733:function(){!function(e,t){"use strict";var n,r,o,i,a,s,l,c,u,d,p=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",(function(){var f=!1,g=!1;this.$get=["$$sanitizeUri",function(e){return f=!0,g&&r(x,S),function(t){var n=[];return u(t,d(n,(function(t,n){return!/^unsafe:/.test(e(t,n))}))),n.join("")}}],this.enableSvg=function(e){return a(e)?(g=e,this):g},this.addValidElements=function(e){return f||(i(e)&&(e={htmlElements:e}),$(S,e.svgElements),$(v,e.htmlVoidElements),$(x,e.htmlVoidElements),$(x,e.htmlElements)),this},this.addValidAttrs=function(e){return f||r(E,A(e,!0)),this},n=t.bind,r=t.extend,o=t.forEach,i=t.isArray,a=t.isDefined,s=t.$$lowercase,l=t.noop,u=function(e,t){null==e?e="":"string"!=typeof e&&(e=""+e);var n=B(e);if(!n)return"";var r=5;do{if(0===r)throw p("uinput","Failed to sanitize html because the input is unstable");r--,e=n.innerHTML,n=B(e)}while(e!==n.innerHTML);var o=n.firstChild;for(;o;){switch(o.nodeType){case 1:t.start(o.nodeName.toLowerCase(),N(o.attributes));break;case 3:t.chars(o.textContent)}var i;if(!((i=o.firstChild)||(1===o.nodeType&&t.end(o.nodeName.toLowerCase()),i=q("nextSibling",o))))for(;null==i&&(o=q("parentNode",o))!==n;)i=q("nextSibling",o),1===o.nodeType&&t.end(o.nodeName.toLowerCase());o=i}for(;o=n.firstChild;)n.removeChild(o)},d=function(e,t){var r=!1,i=n(e,e.push);return{start:function(e,n){e=s(e),!r&&k[e]&&(r=e),r||!0!==x[e]||(i("<"),i(e),o(n,(function(n,r){var o=s(r),a="img"===e&&"src"===o||"background"===o;!0!==E[o]||!0===L[o]&&!t(n,a)||(i(" "),i(r),i('="'),i(U(n)),i('"'))})),i(">"))},end:function(e){e=s(e),r||!0!==x[e]||!0===v[e]||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(U(e))}}},c=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var m=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/([^#-~ |!])/g,v=O("area,br,col,hr,img,wbr"),b=O("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),y=O("rp,rt"),w=r({},y,b),_=r({},b,O("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),T=r({},y,O("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var,audio")),S=O("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),k=O("script,style"),M=O("iframe"),x=r({},v,_,T,w,M),L=O("background,cite,href,longdesc,src,xlink:href,xml:base"),C=O("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width,style"),D=O("simditor-audio,contenteditable,data-src,data-size,data-id,name"),R=O("tipsy-literal,sim-attachment-operation,previewer,reveal-modal,stop-propagation"),I=O("allowfullscreen"),Y=O("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),E=r({},L,Y,C,D,R,I);function O(e,t){return A(e.split(","),t)}function A(e,t){var n,r={};for(n=0;n<e.length;n++)r[t?s(e[n]):e[n]]=!0;return r}function $(e,t){t&&t.length&&r(e,A(t))}var B=function(e,t){var n;if(!t||!t.implementation)throw p("noinert","Can't create an inert html document");var r=((n=t.implementation.createHTMLDocument("inert")).documentElement||n.getDocumentElement()).querySelector("body");return r.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',r.querySelector("svg")?(r.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',r.querySelector("svg img")?function(t){t="<remove></remove>"+t;try{var n=(new e.DOMParser).parseFromString(t,"text/html").body;return n.firstChild.remove(),n}catch(e){return}}:function(e){r.innerHTML=e,t.documentMode&&H(r);return r}):function(t){t="<remove></remove>"+t;try{t=encodeURI(t)}catch(e){return}var n=new e.XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+t,!1),n.send(null);var r=n.response.body;return r.firstChild.remove(),r}}(e,e.document);function N(e){for(var t={},n=0,r=e.length;n<r;n++){var o=e[n];t[o.name]=o.value}return t}function U(e){return e.replace(/&/g,"&amp;").replace(m,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(h,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function H(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,o=n.length;r<o;r++){var i=n[r],a=i.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(t.removeAttributeNode(i),r--,o--)}var s=t.firstChild;s&&H(s),t=q("nextSibling",t)}}function q(e,t){var n=t[e];if(n&&c.call(t,n))throw p("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return n}})).info({angularVersion:"1.7.9"}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i,o=t.$$minErr("linky"),i=t.isDefined,a=t.isFunction,s=t.isObject,c=t.isString;return function(t,u,p){if(null==t||""===t)return t;if(!c(t))throw o("notstring","Expected string but received: {0}",t);for(var f,g,m,h=a(p)?p:s(p)?function(){return p}:function(){return{}},v=t,b=[];f=v.match(n);)g=f[0],f[2]||f[4]||(g=(f[3]?"http://":"mailto:")+g),m=f.index,y(v.substr(0,m)),w(g,f[0].replace(r,"")),v=v.substring(m+f[0].length);return y(v),e(b.join(""));function y(e){var t,n;e&&b.push((t=e,d(n=[],l).chars(t),n.join("")))}function w(e,t){var n,r=h(e);for(n in b.push("<a "),r)b.push(n+'="'+r[n]+'" ');i(u)&&!("target"in r)&&b.push('target="',u,'" '),b.push('href="',e.replace(/"/g,"&quot;"),'">'),y(t),b.push("</a>")}}}])}(window,window.angular)},216208:function(e,t,n){var r,o;void 0===(o="function"==typeof(r=function(){"use strict";var e,t,n="2.2.2-javascript",r={},o=[],i=[],a=0,s=Object.prototype.hasOwnProperty;return(r={onError:function(e){},onClose:function(e){},onOpen:function(e){},onReopen:function(e){},onMessage:function(e){},onReconnect:function(e,t){},onMessagePublished:function(e){},onTransportFailure:function(e,t){},onLocalMessage:function(e){},onFailureToReconnect:function(e,t){},onClientTimeout:function(e){},WebsocketApiAdapter:function(e){var t,n;return e.onMessage=function(e){n.onmessage({data:e.responseBody})},e.onMessagePublished=function(e){n.onmessage({data:e.responseBody})},e.onOpen=function(e){n.onopen(e)},n={close:function(){t.close()},send:function(e){t.push(e)},onmessage:function(e){},onopen:function(e){},onclose:function(e){},onerror:function(e){}},t=new r.subscribe(e),n},AtmosphereRequest:function(e){var t,o,s,l={timeout:3e5,method:"GET",headers:{},contentType:"",callback:null,url:"",data:"",suspend:!0,maxRequest:-1,reconnect:!0,maxStreamingLength:1e7,lastIndex:0,logLevel:"info",requestCount:0,fallbackMethod:"GET",fallbackTransport:"streaming",transport:"long-polling",webSocketImpl:null,webSocketBinaryType:null,dispatchUrl:null,webSocketPathDelimiter:"@@",enableXDR:!1,rewriteURL:!1,attachHeadersAsQueryString:!0,executeCallbackBeforeReconnect:!1,readyState:0,withCredentials:!1,trackMessageLength:!1,messageDelimiter:"|",connectTimeout:-1,reconnectInterval:0,dropHeaders:!0,uuid:0,async:!0,shared:!1,readResponsesHeaders:!1,maxReconnectOnClose:5,enableProtocol:!0,pollingInterval:0,heartbeat:{client:null,server:null},ackInterval:0,onError:function(e){},onClose:function(e){},onOpen:function(e){},onMessage:function(e){},onReopen:function(e,t){},onReconnect:function(e,t){},onMessagePublished:function(e){},onTransportFailure:function(e,t){},onLocalMessage:function(e){},onFailureToReconnect:function(e,t){},onClientTimeout:function(e){}},c={status:200,reasonPhrase:"OK",responseBody:"",messages:[],headers:[],state:"messageReceived",transport:"polling",error:null,request:null,partialMessage:"",errorHandled:!1,closedByClientTimeout:!1,ffTryingReconnect:!1},u=null,d=null,p=null,f=null,g=null,m=!0,h=0,v=!1,b=null,y=null,w=r.util.now();function _(){m=!0,v=!1,h=0,u=null,d=null,p=null,f=null}function T(){x(),_()}function S(e,t){return""===c.partialMessage&&"streaming"===t.transport&&e.responseText.length>t.maxStreamingLength}function k(){if(l.enableProtocol&&!l.firstMessage){var e="X-Atmosphere-Transport=close&X-Atmosphere-tracking-id="+l.uuid;r.util.each(l.headers,(function(t,n){var o=r.util.isFunction(n)?n.call(this,l,l,c):n;null!=o&&(e+="&"+encodeURIComponent(t)+"="+encodeURIComponent(o))}));var t=l.url.replace(/([?&])_=[^&]*/,e);t+=t===l.url?(/\?/.test(l.url)?"&":"?")+e:"";var n={connected:!1},o=new r.AtmosphereRequest(n);o.attachHeadersAsQueryString=!1,o.dropHeaders=!0,o.url=t,o.contentType="text/plain",o.transport="polling",o.method="GET",o.data="",o.async=!1,ie("",o)}}function M(){"debug"===l.logLevel&&r.util.debug("Closing"),v=!0,l.reconnectId&&(clearTimeout(l.reconnectId),delete l.reconnectId),l.heartbeatTimer&&clearTimeout(l.heartbeatTimer),l.reconnect=!1,c.request=l,c.state="unsubscribe",c.responseBody="",c.status=408,c.partialMessage="",we(),k(),x()}function x(){c.partialMessage="",l.id&&clearTimeout(l.id),l.heartbeatTimer&&clearTimeout(l.heartbeatTimer),null!=f&&(f.close(),f=null),null!=g&&(g.abort(),g=null),null!=p&&(p.abort(),p=null),null!=u&&(u.canSendMessage&&u.close(),u=null),null!=d&&(d.close(),d=null),L()}function L(){null!=t&&(clearInterval(o),document.cookie=s+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",t.signal("close",{reason:"",heir:v?(t.get("children")||[])[0]:w}),t.close()),null!=y&&y.close()}function C(e){T(),(l=r.util.extend(l,e)).mrequest=l.reconnect,l.reconnect||(l.reconnect=!0)}function D(){return null!=l.webSocketImpl||window.WebSocket||window.MozWebSocket}function R(){return window.EventSource}function I(){if(l.shared){if(null!=(y=Y(l))&&("debug"===l.logLevel&&r.util.debug("Storage service available. All communication will be local"),y.open(l)))return;"debug"===l.logLevel&&r.util.debug("No Storage service available."),y=null}l.firstMessage=0==a,l.isOpen=!1,l.ctime=r.util.now(),0===l.uuid&&(l.uuid=a),c.closedByClientTimeout=!1,"websocket"!==l.transport&&"sse"!==l.transport?V(l):"websocket"===l.transport?D()?H(!1):W("Websocket is not supported, using request.fallbackTransport ("+l.fallbackTransport+")"):"sse"===l.transport&&(R()?U(!1):W("Server Side Events(SSE) is not supported, using request.fallbackTransport ("+l.fallbackTransport+")"))}function Y(e){var t,n,i,a="atmosphere-"+e.url,s={storage:function(){function t(e){e.key===a&&e.newValue&&u(e.newValue)}if(r.util.storage){var n=window.localStorage,o=function(e){return r.util.parseJSON(n.getItem(a+"-"+e))},i=function(e,t){n.setItem(a+"-"+e,r.util.stringifyJSON(t))};return{init:function(){return i("children",o("children").concat([w])),r.util.on(window,"storage",t),o("opened")},signal:function(e,t){n.setItem(a,r.util.stringifyJSON({target:"p",type:e,data:t}))},close:function(){var n=o("children");r.util.off(window,"storage",t),n&&c(n,e.id)&&i("children",n)}}}},windowref:function(){var e=window.open("",a.replace(/\W/g,""));if(e&&!e.closed&&e.callbacks)return{init:function(){return e.callbacks.push(u),e.children.push(w),e.opened},signal:function(t,n){!e.closed&&e.fire&&e.fire(r.util.stringifyJSON({target:"p",type:t,data:n}))},close:function(){i||(c(e.callbacks,u),c(e.children,w))}}}};function c(e,t){var n,r=e.length;for(n=0;n<r;n++)e[n]===t&&e.splice(n,1);return r!==e.length}function u(t){var n=r.util.parseJSON(t),o=n.data;if("c"===n.target)switch(n.type){case"open":O("opening","local",l);break;case"close":i||(i=!0,"aborted"===o.reason?M():o.heir===w?I():setTimeout((function(){I()}),100));break;case"message":me(o,"messageReceived",200,e.transport);break;case"localMessage":ge(o)}}function d(){var e=new RegExp("(?:^|; )("+encodeURIComponent(a)+")=([^;]*)").exec(document.cookie);if(e)return r.util.parseJSON(decodeURIComponent(e[2]))}if((t=d())&&!(r.util.now()-t.ts>1e3)&&(n=s.storage()||s.windowref()))return{open:function(){var i;return o=setInterval((function(){var e=t;(t=d())&&e.ts!==t.ts||u(r.util.stringifyJSON({target:"c",type:"close",data:{reason:"error",heir:e.heir}}))}),1e3),(i=n.init())&&setTimeout((function(){O("opening","local",e)}),50),i},send:function(e){n.signal("send",e)},localSend:function(e){n.signal("localSend",r.util.stringifyJSON({id:w,event:e}))},close:function(){v||(clearInterval(o),n.signal("close"),n.close())}}}function E(){var e,n="atmosphere-"+l.url,i={storage:function(){function e(e){e.key===n&&e.newValue&&a(e.newValue)}if(r.util.storage){var t=window.localStorage;return{init:function(){r.util.on(window,"storage",e)},signal:function(e,o){t.setItem(n,r.util.stringifyJSON({target:"c",type:e,data:o}))},get:function(e){return r.util.parseJSON(t.getItem(n+"-"+e))},set:function(e,o){t.setItem(n+"-"+e,r.util.stringifyJSON(o))},close:function(){r.util.off(window,"storage",e),t.removeItem(n),t.removeItem(n+"-opened"),t.removeItem(n+"-children")}}}},windowref:function(){var e,t=n.replace(/\W/g,""),o=document.getElementById(t);return o||((o=document.createElement("div")).id=t,o.style.display="none",o.innerHTML='<iframe name="'+t+'" />',document.body.appendChild(o)),e=o.firstChild.contentWindow,{init:function(){e.callbacks=[a],e.fire=function(t){var n;for(n=0;n<e.callbacks.length;n++)e.callbacks[n](t)}},signal:function(t,n){!e.closed&&e.fire&&e.fire(r.util.stringifyJSON({target:"c",type:t,data:n}))},get:function(t){return e.closed?null:e[t]},set:function(t,n){e.closed||(e[t]=n)},close:function(){}}}};function a(e){var t=r.util.parseJSON(e),n=t.data;if("p"===t.target)switch(t.type){case"send":oe(n);break;case"localSend":ge(n);break;case"close":M()}}function c(){document.cookie=s+"="+encodeURIComponent(r.util.stringifyJSON({ts:r.util.now()+1,heir:(e.get("children")||[])[0]}))+"; path=/"}b=function(t){e.signal("message",t)},(e=i.storage()||i.windowref()).init(),"debug"===l.logLevel&&r.util.debug("Installed StorageService "+e),e.set("children",[]),null==e.get("opened")||e.get("opened")||e.set("opened",!1),s=encodeURIComponent(n),c(),o=setInterval(c,1e3),t=e}function O(e,n,r){if(l.shared&&"local"!==n&&E(),null!=t&&t.set("opened",!0),r.close=function(){M()},h>0&&"re-connecting"===e)r.isReopen=!0,Z(c);else if(null==c.error){c.request=r;var o=c.state;c.state=e;var i=c.transport;c.transport=n;var a=c.responseBody;we(),c.responseBody=a,c.state=o,c.transport=i}}function A(e){e.transport="jsonp";var t,n=l;null!=e&&void 0!==e&&(n=e),(g={open:function(){var o="atmosphere"+ ++w;function i(){var r=n.url;null!=n.dispatchUrl&&(r+=n.dispatchUrl);var i=n.data;n.attachHeadersAsQueryString&&(r=X(n),""!==i&&(r+="&X-Atmosphere-Post-Body="+encodeURIComponent(i)),i="");var a=document.head||document.getElementsByTagName("head")[0]||document.documentElement;(t=document.createElement("script")).src=r+"&jsonpTransport="+o,t.clean=function(){t.clean=t.onerror=t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t)},t.onload=t.onreadystatechange=function(){t.readyState&&!/loaded|complete/.test(t.readyState)||t.clean()},t.onerror=function(){t.clean(),n.lastIndex=0,n.openId&&clearTimeout(n.openId),n.heartbeatTimer&&clearTimeout(n.heartbeatTimer),n.reconnect&&h++<n.maxReconnectOnClose?(O("re-connecting",n.transport,n),Q(g,n,e.reconnectInterval),n.openId=setTimeout((function(){z(n)}),n.reconnectInterval+1e3)):F(0,"maxReconnectOnClose reached")},a.insertBefore(t,a.firstChild)}window[o]=function(e){if(n.reconnect)if(-1===n.maxRequest||n.requestCount++<n.maxRequest){if(n.executeCallbackBeforeReconnect||Q(g,n,n.pollingInterval),null!=e&&"string"!=typeof e)try{e=e.message}catch(e){}j(e,n,c)||me(c.responseBody,"messageReceived",200,n.transport),n.executeCallbackBeforeReconnect&&Q(g,n,n.pollingInterval)}else r.util.log(l.logLevel,["JSONP reconnect maximum try reached "+l.requestCount]),F(0,"maxRequest reached")},setTimeout((function(){i()}),50)},abort:function(){t&&t.clean&&t.clean()}}).open()}function $(e){return null!=l.webSocketImpl?l.webSocketImpl:window.WebSocket?new WebSocket(e):new MozWebSocket(e)}function B(){return X(l,r.util.getAbsoluteURL(l.webSocketUrl||l.url)).replace(/^http/,"ws")}function N(){return X(l)}function U(e){c.transport="sse";var t=N();if("debug"===l.logLevel&&(r.util.debug("Invoking executeSSE"),r.util.debug("Using URL: "+t)),!e||l.reconnect){try{d=new EventSource(t,{withCredentials:l.withCredentials})}catch(e){return F(0,e),void W("SSE failed. Downgrading to fallback transport and resending")}l.connectTimeout>0&&(l.id=setTimeout((function(){e||x()}),l.connectTimeout)),d.onopen=function(t){P(l),"debug"===l.logLevel&&r.util.debug("SSE successfully opened"),l.enableProtocol?l.isReopen&&(l.isReopen=!1,O("re-opening",l.transport,l)):O(e?"re-opening":"opening","sse",l),e=!0,"POST"===l.method&&(c.state="messageReceived",d.send(l.data))},d.onmessage=function(e){P(l),l.enableXDR||!e.origin||e.origin===window.location.protocol+"//"+window.location.host?(c.state="messageReceived",c.status=200,j(e=e.data,l,c)||(we(),c.responseBody="",c.messages=[])):r.util.log(l.logLevel,["Origin was not "+window.location.protocol+"//"+window.location.host])},d.onerror=function(t){clearTimeout(l.id),l.heartbeatTimer&&clearTimeout(l.heartbeatTimer),c.closedByClientTimeout||(ye(e),x(),v?r.util.log(l.logLevel,["SSE closed normally"]):e?l.reconnect&&"sse"===c.transport&&(h++<l.maxReconnectOnClose?(O("re-connecting",l.transport,l),l.reconnectInterval>0?l.reconnectId=setTimeout((function(){U(!0)}),l.reconnectInterval):U(!0),c.responseBody="",c.messages=[]):(r.util.log(l.logLevel,["SSE reconnect maximum try reached "+h]),F(0,"maxReconnectOnClose reached"))):W("SSE failed. Downgrading to fallback transport and resending"))}}else null!=d&&x()}function H(e){c.transport="websocket";var t=B(l.url);"debug"===l.logLevel&&(r.util.debug("Invoking executeWebSocket"),r.util.debug("Using URL: "+t)),!e||l.reconnect?(u=$(t),null!=l.webSocketBinaryType&&(u.binaryType=l.webSocketBinaryType),l.connectTimeout>0&&(l.id=setTimeout((function(){if(e);else{var t={code:1002,reason:"",wasClean:!1};u.onclose(t);try{x()}catch(e){}}}),l.connectTimeout)),u.onopen=function(t){P(l),"debug"===l.logLevel&&r.util.debug("Websocket successfully opened");var n=e;null!=u&&(u.canSendMessage=!0),l.enableProtocol||(e=!0,O(n?"re-opening":"opening","websocket",l)),null!=u&&"POST"===l.method&&(c.state="messageReceived",u.send(l.data))},u.onmessage=function(t){if(P(l),l.enableProtocol&&(e=!0),c.state="messageReceived",c.status=200,"string"==typeof(t=t.data))j(t,l,c)||(we(),c.responseBody="",c.messages=[]);else{if(""===(t=q(l,t)))return;c.responseBody=t,we(),c.responseBody=null}},u.onerror=function(e){clearTimeout(l.id),l.heartbeatTimer&&clearTimeout(l.heartbeatTimer)},u.onclose=function(t){if(clearTimeout(l.id),"closed"!==c.state){var n=t.reason;if(""===n)switch(t.code){case 1e3:n="Normal closure; the connection successfully completed whatever purpose for which it was created.";break;case 1001:n="The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.";break;case 1002:n="The endpoint is terminating the connection due to a protocol error.";break;case 1003:n="The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data).";break;case 1004:n="The endpoint is terminating the connection because a data frame was received that is too large.";break;case 1005:n="Unknown: no status code was provided even though one was expected.";break;case 1006:n="Connection was closed abnormally (that is, with no close frame being sent)."}"warn"===l.logLevel&&(r.util.warn("Websocket closed, reason: "+n),r.util.warn("Websocket closed, wasClean: "+t.wasClean)),c.closedByClientTimeout||(ye(e),c.state="closed",v?r.util.log(l.logLevel,["Websocket closed normally"]):e?l.reconnect&&"websocket"===c.transport&&1001!==t.code&&(x(),h++<l.maxReconnectOnClose?(O("re-connecting",l.transport,l),l.reconnectInterval>0?l.reconnectId=setTimeout((function(){c.responseBody="",c.messages=[],H(!0)}),l.reconnectInterval):(c.responseBody="",c.messages=[],H(!0))):(r.util.log(l.logLevel,["Websocket reconnect maximum try reached "+l.requestCount]),"warn"===l.logLevel&&r.util.warn("Websocket error, reason: "+t.reason),F(0,"maxReconnectOnClose reached"))):W("Websocket failed. Downgrading to Comet and resending"))}},navigator.userAgent.toLowerCase().indexOf("android")>-1&&void 0===u.url&&u.onclose({reason:"Android 4.1 does not support websockets.",wasClean:!1})):null!=u&&x()}function q(e,t){var n=t;if("polling"===e.transport)return n;if(0!==r.util.trim(t).length&&e.enableProtocol&&e.firstMessage){var o=e.trackMessageLength?1:0,i=t.split(e.messageDelimiter);if(i.length<=o+1)return n;e.firstMessage=!1,e.uuid=r.util.trim(i[o]),i.length<=o+2&&r.util.log("error",["Protocol data not sent by the server. If you enable protocol on client side, be sure to install JavascriptProtocol interceptor on server side.Also note that atmosphere-runtime 2.2+ should be used."]);var s=parseInt(r.util.trim(i[o+1]),10),c=i[o+2];if(!isNaN(s)&&s>0){var u=function(){oe(c),e.heartbeatTimer=setTimeout(u,s)};e.heartbeatTimer=setTimeout(u,s)}if("long-polling"!==e.transport&&z(e),a=e.uuid,n="",o=e.trackMessageLength?4:3,i.length>o+1)for(var d=o;d<i.length;d++)n+=i[d],d+1!==i.length&&(n+=e.messageDelimiter);0!==e.ackInterval&&setTimeout((function(){oe("...ACK...")}),e.ackInterval)}else e.enableProtocol&&e.firstMessage&&r.util.browser.msie&&+r.util.browser.version.split(".")[0]<10?r.util.log(l.logLevel,["Receiving unexpected data from IE"]):z(e);return n}function P(e){clearTimeout(e.id),e.timeout>0&&"polling"!==e.transport&&(e.id=setTimeout((function(){J(e),k(),x()}),e.timeout))}function J(e){c.closedByClientTimeout=!0,c.state="closedByClient",c.responseBody="",c.status=408,c.messages=[],we()}function F(e,t){x(),clearTimeout(l.id),c.state="error",c.reasonPhrase=t,c.responseBody="",c.status=e,c.messages=[],we()}function j(e,t,n){if(0===(e=q(t,e)).length)return!0;if(n.responseBody=e,t.trackMessageLength){for(var r=[],o=(e=n.partialMessage+e).indexOf(t.messageDelimiter);-1!==o;){var i=e.substring(0,o),a=+i;if(isNaN(a))throw new Error('message length "'+i+'" is not a number');(o+=t.messageDelimiter.length)+a>e.length?o=-1:(r.push(e.substring(o,o+a)),o=(e=e.substring(o+a,e.length)).indexOf(t.messageDelimiter))}return n.partialMessage=e,0!==r.length?(n.responseBody=r.join(t.messageDelimiter),n.messages=r,!1):(n.responseBody="",n.messages=[],!0)}return n.responseBody=e,!1}function W(e){r.util.log(l.logLevel,[e]),void 0!==l.onTransportFailure?l.onTransportFailure(e,l):void 0!==r.util.onTransportFailure&&r.util.onTransportFailure(e,l),l.transport=l.fallbackTransport;var t=-1===l.connectTimeout?0:l.connectTimeout;l.reconnect&&"none"!==l.transport||null==l.transport?(l.method=l.fallbackMethod,c.transport=l.fallbackTransport,l.fallbackTransport="none",t>0?l.reconnectId=setTimeout((function(){I()}),t):I()):F(500,"Unable to reconnect with fallback transport")}function X(e,t){var o=l;return null!=e&&void 0!==e&&(o=e),null==t&&(t=o.url),o.attachHeadersAsQueryString?(-1!==t.indexOf("X-Atmosphere-Framework")||(t+=-1!==t.indexOf("?")?"&":"?",t+="X-Atmosphere-tracking-id="+o.uuid,t+="&X-Atmosphere-Framework="+n,t+="&X-Atmosphere-Transport="+o.transport,o.trackMessageLength&&(t+="&X-Atmosphere-TrackMessageSize=true"),null!==o.heartbeat&&null!==o.heartbeat.server&&(t+="&X-Heartbeat-Server="+o.heartbeat.server),""!==o.contentType&&(t+="&Content-Type="+("websocket"===o.transport?o.contentType:encodeURIComponent(o.contentType))),o.enableProtocol&&(t+="&X-atmo-protocol=true"),r.util.each(o.headers,(function(n,i){var a=r.util.isFunction(i)?i.call(this,o,e,c):i;null!=a&&(t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(a))}))),t):t}function z(e){e.isOpen?e.isReopen&&(e.isReopen=!1,O("re-opening",e.transport,e)):(e.isOpen=!0,O("opening",e.transport,e))}function V(e){var t=l;if(null==e&&void 0===e||(t=e),t.lastIndex=0,t.readyState=0,"jsonp"===t.transport||t.enableXDR&&r.util.checkCORSSupport())A(t);else{if(r.util.browser.msie&&+r.util.browser.version.split(".")[0]<10){if("streaming"===t.transport)return void(t.enableXDR&&window.XDomainRequest?ee(t):ne(t));if(t.enableXDR&&window.XDomainRequest)return void ee(t)}var n=function(){t.lastIndex=0,t.reconnect&&h++<t.maxReconnectOnClose?(O("re-connecting",e.transport,e),Q(i,t,e.reconnectInterval)):F(0,"maxReconnectOnClose reached")},o=function(){c.errorHandled=!0,x(),n()};if(t.force||t.reconnect&&(-1===t.maxRequest||t.requestCount++<t.maxRequest)){t.force=!1;var i=r.util.xhr();i.hasData=!1,G(i,t,!0),t.suspend&&(p=i),"polling"!==t.transport&&(c.transport=t.transport,i.onabort=function(){ye(!0)},i.onerror=function(){c.error=!0,c.ffTryingReconnect=!0;try{c.status=XMLHttpRequest.status}catch(e){c.status=500}c.status||(c.status=500),c.errorHandled||(x(),n())}),i.onreadystatechange=function(){if(!v){c.error=null;var a=!1,s=!1;if("streaming"===t.transport&&t.readyState>2&&4===i.readyState)return x(),void n();if(t.readyState=i.readyState,("streaming"===t.transport&&i.readyState>=3||"long-polling"===t.transport&&4===i.readyState)&&(s=!0),P(l),"polling"!==t.transport){var u=200;if(4===i.readyState&&(u=i.status>1e3?0:i.status),u>=300||0===u)return void o();t.enableProtocol&&e.firstMessage||2!==i.readyState||(r.util.browser.mozilla&&c.ffTryingReconnect?(c.ffTryingReconnect=!1,setTimeout((function(){c.ffTryingReconnect||z(t)}),500)):z(t))}else 4===i.readyState&&(s=!0);if(s){var d=i.responseText;if(c.errorHandled=!1,0===r.util.trim(d).length&&"long-polling"===t.transport)return void(i.hasData?i.hasData=!1:o());if(i.hasData=!0,he(i,l),"streaming"===t.transport)if(r.util.browser.opera)r.util.iterate((function(){if(500!==c.status&&i.responseText.length>t.lastIndex){try{c.status=i.status,c.headers=r.util.parseHeaders(i.getAllResponseHeaders()),he(i,l)}catch(e){c.status=404}P(l),c.state="messageReceived";var e=i.responseText.substring(t.lastIndex);if(t.lastIndex=i.responseText.length,(a=j(e,t,c))||we(),S(i,t))return void K(i,t)}else if(c.status>400)return t.lastIndex=i.responseText.length,!1}),0);else{var p=d.substring(t.lastIndex,d.length);if(a=j(p,t,c),t.lastIndex=d.length,a)return}else a=j(d,t,c);var f=S(i,t);try{c.status=i.status,c.headers=r.util.parseHeaders(i.getAllResponseHeaders()),he(i,t)}catch(e){c.status=404}t.suspend?c.state=0===c.status?"closed":"messageReceived":c.state="messagePublished";var g=!f&&"streaming"!==e.transport&&"polling"!==e.transport;g&&!t.executeCallbackBeforeReconnect&&Q(i,t,t.pollingInterval),0===c.responseBody.length||a||we(),g&&t.executeCallbackBeforeReconnect&&Q(i,t,t.pollingInterval),f&&K(i,t)}}};try{i.send(t.data),m=!0}catch(e){r.util.log(t.logLevel,["Unable to connect to "+t.url]),F(0,e)}}else"debug"===t.logLevel&&r.util.log(t.logLevel,["Max re-connection reached."]),F(0,"maxRequest reached")}}function K(e,t){M(),v=!1,Q(e,t,500)}function G(e,t,n){var o=t.url;null!=t.dispatchUrl&&"POST"===t.method&&(o+=t.dispatchUrl),o=X(t,o),o=r.util.prepareURL(o),n&&(e.open(t.method,o,t.async),t.connectTimeout>0&&(t.id=setTimeout((function(){0===t.requestCount&&(x(),me("Connect timeout","closed",200,t.transport))}),t.connectTimeout))),l.withCredentials&&"websocket"!==l.transport&&"withCredentials"in e&&(e.withCredentials=!0),l.dropHeaders||(e.setRequestHeader("X-Atmosphere-Framework",r.util.version),e.setRequestHeader("X-Atmosphere-Transport",t.transport),null!==e.heartbeat&&null!==e.heartbeat.server&&e.setRequestHeader("X-Heartbeat-Server",e.heartbeat.server),t.trackMessageLength&&e.setRequestHeader("X-Atmosphere-TrackMessageSize","true"),e.setRequestHeader("X-Atmosphere-tracking-id",t.uuid),r.util.each(t.headers,(function(o,i){var a=r.util.isFunction(i)?i.call(this,e,t,n,c):i;null!=a&&e.setRequestHeader(o,a)}))),""!==t.contentType&&e.setRequestHeader("Content-Type",t.contentType)}function Q(e,t,n){if(t.reconnect||t.suspend&&m){var r=0;e&&e.readyState>1&&(r=e.status>1e3?0:e.status),c.status=0===r?204:r,c.reason=0===r?"Server resumed the connection or down.":"OK",clearTimeout(t.id),t.reconnectId&&(clearTimeout(t.reconnectId),delete t.reconnectId),n>0?l.reconnectId=setTimeout((function(){V(t)}),n):V(t)}}function Z(e){e.state="re-connecting",ve(e)}function ee(e){"polling"!==e.transport?(f=te(e)).open():te(e).open()}function te(e){var t=l;null!=e&&void 0!==e&&(t=e);var n=t.transport,o=0,i=new window.XDomainRequest,a=function(){"long-polling"===t.transport&&t.reconnect&&(-1===t.maxRequest||t.requestCount++<t.maxRequest)&&(i.status=200,ee(t))},s=t.rewriteURL||function(e){var t=/(?:^|;\s*)(JSESSIONID|PHPSESSID)=([^;]*)/.exec(document.cookie);switch(t&&t[1]){case"JSESSIONID":return e.replace(/;jsessionid=[^\?]*|(\?)|$/,";jsessionid="+t[2]+"$1");case"PHPSESSID":return e.replace(/\?PHPSESSID=[^&]*&?|\?|$/,"?PHPSESSID="+t[2]+"&").replace(/&$/,"")}return e};i.onprogress=function(){u(i)},i.onerror=function(){"polling"!==t.transport&&(x(),h++<t.maxReconnectOnClose?t.reconnectInterval>0?t.reconnectId=setTimeout((function(){O("re-connecting",e.transport,e),ee(t)}),t.reconnectInterval):(O("re-connecting",e.transport,e),ee(t)):F(0,"maxReconnectOnClose reached"))},i.onload=function(){};var u=function(e){clearTimeout(t.id);var i=e.responseText;if(i=i.substring(o),o+=i.length,"polling"!==n){P(t);var s=j(i,t,c);if("long-polling"===n&&0===r.util.trim(i).length)return;t.executeCallbackBeforeReconnect&&a(),s||me(c.responseBody,"messageReceived",200,n),t.executeCallbackBeforeReconnect||a()}};return{open:function(){var e=t.url;null!=t.dispatchUrl&&(e+=t.dispatchUrl),e=X(t,e),i.open(t.method,s(e)),"GET"===t.method?i.send():i.send(t.data),t.connectTimeout>0&&(t.id=setTimeout((function(){0===t.requestCount&&(x(),me("Connect timeout","closed",200,t.transport))}),t.connectTimeout))},close:function(){i.abort()}}}function ne(e){(f=re(e)).open()}function re(e){var t,n=l;null!=e&&void 0!==e&&(n=e);var o=new window.ActiveXObject("htmlfile");o.open(),o.close();var i=n.url;return null!=n.dispatchUrl&&(i+=n.dispatchUrl),"polling"!==n.transport&&(c.transport=n.transport),{open:function(){var e=o.createElement("iframe");i=X(n),""!==n.data&&(i+="&X-Atmosphere-Post-Body="+encodeURIComponent(n.data)),i=r.util.prepareURL(i),e.src=i,o.body.appendChild(e);var a=e.contentDocument||e.contentWindow.document;t=r.util.iterate((function(){try{if(!a.firstChild)return;var e=a.body?a.body.lastChild:a,i=function(){var t=e.cloneNode(!0);t.appendChild(a.createTextNode("."));var n=t.innerText;return n=n.substring(0,n.length-1)};if(!a.body||!a.body.firstChild||"pre"!==a.body.firstChild.nodeName.toLowerCase()){var s=a.head||a.getElementsByTagName("head")[0]||a.documentElement||a,u=a.createElement("script");u.text="document.write('<plaintext>')",s.insertBefore(u,s.firstChild),s.removeChild(u),e=a.body.lastChild}return n.closed&&(n.isReopen=!0),t=r.util.iterate((function(){var t=i();if(t.length>n.lastIndex){if(P(l),c.status=200,c.error=null,e.innerText="",j(t,n,c))return"";me(c.responseBody,"messageReceived",200,n.transport)}if(n.lastIndex=0,"complete"===a.readyState)return ye(!0),O("re-connecting",n.transport,n),n.reconnectInterval>0?n.reconnectId=setTimeout((function(){ne(n)}),n.reconnectInterval):ne(n),!1}),null),!1}catch(e){return c.error=!0,O("re-connecting",n.transport,n),h++<n.maxReconnectOnClose?n.reconnectInterval>0?n.reconnectId=setTimeout((function(){ne(n)}),n.reconnectInterval):ne(n):F(0,"maxReconnectOnClose reached"),o.execCommand("Stop"),o.close(),!1}}))},close:function(){t&&t(),o.execCommand("Stop"),ye(!0)}}}function oe(e){null!=y?ae(e):null!=p||null!=d?le(e):null!=f?ce(e):null!=g?ue(e):null!=u?fe(e):(F(0,"No suspended connection available"),r.util.error("No suspended connection available. Make sure atmosphere.subscribe has been called and request.onOpen invoked before invoking this method"))}function ie(e,t){t||(t=pe(e)),t.transport="polling",t.method="GET",t.async=!1,t.withCredentials=!1,t.reconnect=!1,t.force=!0,t.suspend=!1,t.timeout=1e3,V(t)}function ae(e){y.send(e)}function se(e){if(0!==e.length)try{y?y.localSend(e):t&&t.signal("localMessage",r.util.stringifyJSON({id:w,event:e}))}catch(e){r.util.error(e)}}function le(e){V(pe(e))}function ce(e){if(l.enableXDR&&r.util.checkCORSSupport()){var t=pe(e);t.reconnect=!1,A(t)}else le(e)}function ue(e){le(e)}function de(e){var t=e;return"object"==typeof t&&(t=e.data),t}function pe(e){var t=de(e),n={connected:!1,timeout:6e4,method:"POST",url:l.url,contentType:l.contentType,headers:l.headers,reconnect:!0,callback:null,data:t,suspend:!1,maxRequest:-1,logLevel:"info",requestCount:0,withCredentials:l.withCredentials,async:l.async,transport:"polling",isOpen:!0,attachHeadersAsQueryString:!0,enableXDR:l.enableXDR,uuid:l.uuid,dispatchUrl:l.dispatchUrl,enableProtocol:!1,messageDelimiter:"|",trackMessageLength:l.trackMessageLength,maxReconnectOnClose:l.maxReconnectOnClose,heartbeatTimer:l.heartbeatTimer,heartbeat:l.heartbeat};return"object"==typeof e&&(n=r.util.extend(n,e)),n}function fe(e){var t,n=r.util.isBinary(e)?e:de(e);try{if(t=null!=l.dispatchUrl?l.webSocketPathDelimiter+l.dispatchUrl+l.webSocketPathDelimiter+n:n,!u.canSendMessage)return void r.util.error("WebSocket not connected.");u.send(t)}catch(t){u.onclose=function(e){},x(),W("Websocket failed. Downgrading to Comet and resending "+e),le(e)}}function ge(e){var t=r.util.parseJSON(e);t.id!==w&&(void 0!==l.onLocalMessage?l.onLocalMessage(t.event):void 0!==r.util.onLocalMessage&&r.util.onLocalMessage(t.event))}function me(e,t,n,r){c.responseBody=e,c.transport=r,c.status=n,c.state=t,we()}function he(e,t){if(t.readResponsesHeaders)try{var n=e.getResponseHeader("X-Atmosphere-tracking-id");n&&null!=n&&(t.uuid=n.split(" ").pop())}catch(e){}else t.enableProtocol||(t.uuid=w)}function ve(e){be(e,l),be(e,r.util)}function be(e,t){switch(e.state){case"messageReceived":h=0,void 0!==t.onMessage&&t.onMessage(e),void 0!==t.onmessage&&t.onmessage(e);break;case"error":void 0!==t.onError&&t.onError(e),void 0!==t.onerror&&t.onerror(e);break;case"opening":delete l.closed,void 0!==t.onOpen&&t.onOpen(e),void 0!==t.onopen&&t.onopen(e);break;case"messagePublished":void 0!==t.onMessagePublished&&t.onMessagePublished(e);break;case"re-connecting":void 0!==t.onReconnect&&t.onReconnect(l,e);break;case"closedByClient":void 0!==t.onClientTimeout&&t.onClientTimeout(l);break;case"re-opening":delete l.closed,void 0!==t.onReopen&&t.onReopen(l,e);break;case"fail-to-reconnect":void 0!==t.onFailureToReconnect&&t.onFailureToReconnect(l,e);break;case"unsubscribe":case"closed":void 0!==l.closed&&l.closed||(void 0!==t.onClose&&t.onClose(e),void 0!==t.onclose&&t.onclose(e)),l.closed=!0}}function ye(e){"closed"!==c.state&&(c.state="closed",c.responseBody="",c.messages=[],c.status=e?200:501,we())}function we(){var e=function(e,t){t(c)};null==y&&null!=b&&b(c.responseBody),l.reconnect=l.mrequest;for(var t="string"==typeof c.responseBody,n=t&&l.trackMessageLength?c.messages.length>0?c.messages:[""]:new Array(c.responseBody),o=0;o<n.length;o++)if(!(n.length>1&&0===n[o].length)&&(c.responseBody=t?r.util.trim(n[o]):n[o],null==y&&null!=b&&b(c.responseBody),0!==c.responseBody.length||"messageReceived"!==c.state)){if(ve(c),i.length>0){"debug"===l.logLevel&&r.util.debug("Invoking "+i.length+" global callbacks: "+c.state);try{r.util.each(i,e)}catch(e){r.util.log(l.logLevel,["Callback exception"+e])}}if("function"==typeof l.callback){"debug"===l.logLevel&&r.util.debug("Invoking request callbacks");try{l.callback(c)}catch(e){r.util.log(l.logLevel,["Callback exception"+e])}}}}C(e),this.subscribe=function(e){C(e),I()},this.execute=function(){I()},this.close=function(){M()},this.disconnect=function(){k()},this.getUrl=function(){return l.url},this.push=function(e,t){if(null!=t){var n=l.dispatchUrl;l.dispatchUrl=t,oe(e),l.dispatchUrl=n}else oe(e)},this.getUUID=function(){return l.uuid},this.pushLocal=function(e){se(e)},this.enableProtocol=function(e){return l.enableProtocol},this.request=l,this.response=c}}).subscribe=function(e,t,n){"function"==typeof t&&r.addCallback(t),"string"!=typeof e?n=e:n.url=e,a=void 0!==n&&void 0!==n.uuid?n.uuid:0;var i=new r.AtmosphereRequest(n);return i.execute(),o[o.length]=i,i},r.unsubscribe=function(){if(o.length>0)for(var e=[].concat(o),t=0;t<e.length;t++){var n=e[t];n.close(),clearTimeout(n.response.request.id),n.heartbeatTimer&&clearTimeout(n.heartbeatTimer)}o=[],i=[]},r.unsubscribeUrl=function(e){var t=-1;if(o.length>0)for(var n=0;n<o.length;n++){var r=o[n];if(r.getUrl()===e){r.close(),clearTimeout(r.response.request.id),r.heartbeatTimer&&clearTimeout(r.heartbeatTimer),t=n;break}}t>=0&&o.splice(t,1)},r.addCallback=function(e){-1===r.util.inArray(e,i)&&i.push(e)},r.removeCallback=function(e){var t=r.util.inArray(e,i);-1!==t&&i.splice(t,1)},r.util={browser:{},parseHeaders:function(e){for(var t,n=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,r={};t=n.exec(e);)r[t[1]]=t[2];return r},now:function(){return(new Date).getTime()},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},inArray:function(e,t){if(!Array.prototype.indexOf){for(var n=t.length,r=0;r<n;++r)if(t[r]===e)return r;return-1}return t.indexOf(e)},isBinary:function(e){return/^\[object\s(?:Blob|ArrayBuffer|.+Array)\]$/.test(Object.prototype.toString.call(e))},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},getAbsoluteURL:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+e+'"/>',encodeURI(decodeURI(t.firstChild.href))},prepareURL:function(e){var t=r.util.now(),n=e.replace(/([?&])_=[^&]*/,"$1_="+t);return n+(n===e?(/\?/.test(e)?"&":"?")+"_="+t:"")},trim:function(e){return String.prototype.trim?e.toString().trim():e.toString().replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},param:function(e){var t,n=[];function o(e,t){t=r.util.isFunction(t)?t():null==t?"":t,n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}function i(e,t){var n;if(r.util.isArray(t))r.util.each(t,(function(t,n){/\[\]$/.test(e)?o(e,n):i(e+"["+("object"==typeof n?t:"")+"]",n)}));else if("[object Object]"===Object.prototype.toString.call(t))for(n in t)i(e+"["+n+"]",t[n]);else o(e,t)}for(t in e)i(t,e[t]);return n.join("&").replace(/%20/g,"+")},storage:function(){try{return!(!window.localStorage||!window.StorageEvent)}catch(e){return!1}},iterate:function(e,t){var n;return t=t||0,function r(){n=setTimeout((function(){!1!==e()&&r()}),t)}(),function(){clearTimeout(n)}},each:function(e,t,n){if(e){var o=0,i=e.length,a=r.util.isArray(e);if(n){if(a)for(;o<i&&!1!==t.apply(e[o],n);o++);else for(o in e)if(!1===t.apply(e[o],n))break}else if(a)for(;o<i&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e}},extend:function(e){var t,n,r;for(t=1;t<arguments.length;t++)if(null!=(n=arguments[t]))for(r in n)e[r]=n[r];return e},on:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},off:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},log:function(e,t){if(window.console){var n=window.console[e];"function"==typeof n&&n.apply(window.console,t)}},warn:function(){r.util.log("warn",arguments)},info:function(){r.util.log("info",arguments)},debug:function(){r.util.log("debug",arguments)},error:function(){r.util.log("error",arguments)},xhr:function(){try{return new window.XMLHttpRequest}catch(e){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},parseJSON:function(e){return e?window.JSON&&window.JSON.parse?window.JSON.parse(e):new Function("return "+e)():null},stringifyJSON:function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function r(e){return'"'+e.replace(t,(function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"'}function o(e){return e<10?"0"+e:e}return window.JSON&&window.JSON.stringify?window.JSON.stringify(e):function e(t,n){var i,a,l,c,u=n[t],d=typeof u;switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(d=typeof(u=u.toJSON(t))),d){case"string":return r(u);case"number":return isFinite(u)?String(u):"null";case"boolean":return String(u);case"object":if(!u)return"null";switch(Object.prototype.toString.call(u)){case"[object Date]":return isFinite(u.valueOf())?'"'+u.getUTCFullYear()+"-"+o(u.getUTCMonth()+1)+"-"+o(u.getUTCDate())+"T"+o(u.getUTCHours())+":"+o(u.getUTCMinutes())+":"+o(u.getUTCSeconds())+'Z"':"null";case"[object Array]":for(l=u.length,c=[],i=0;i<l;i++)c.push(e(i,u)||"null");return"["+c.join(",")+"]";default:for(i in c=[],u)s.call(u,i)&&(a=e(i,u))&&c.push(r(i)+":"+a);return"{"+c.join(",")+"}"}}}("",{"":e})},checkCORSSupport:function(){return!!(r.util.browser.msie&&!window.XDomainRequest&&+r.util.browser.version.split(".")[0]<11)||!!(r.util.browser.opera&&+r.util.browser.version.split(".")<12)||"KreaTVWebKit/531"===r.util.trim(navigator.userAgent).slice(0,16)||"kreatel"===r.util.trim(navigator.userAgent).slice(-7).toLowerCase()||!!(navigator.userAgent.toLowerCase().indexOf("android")>-1)}},r.util.now(),e=navigator.userAgent.toLowerCase(),t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||/(trident)(?:.*? rv:([\w.]+)|)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],r.util.browser[t[1]||""]=!0,r.util.browser.version=t[2]||"0",r.util.browser.trident&&(r.util.browser.msie=!0),(r.util.browser.msie||r.util.browser.mozilla&&1==+r.util.browser.version.split(".")[0])&&(r.util.storage=!1),r.util.on(window,"unload",(function(e){r.unsubscribe()})),r.util.on(window,"keypress",(function(e){27!==e.charCode&&27!==e.keyCode||e.preventDefault&&e.preventDefault()})),r.util.on(window,"offline",(function(){r.unsubscribe()})),r})?r.call(t,n,t,e):r)||(e.exports=o)},962680:function(){!function(e){var t=[];function n(n){var r=this,o="$BroadcastChannel$"+(n=String(n))+"$";t[o]=t[o]||[],t[o].push(this),this._name=n,this._id=o,this._closed=!1,this._mc=new MessageChannel,this._mc.port1.start(),this._mc.port2.start(),e.addEventListener("storage",(function(t){if(t.storageArea===e.localStorage&&null!==t.newValue&&t.key.substring(0,o.length)===o){var n=JSON.parse(t.newValue);r._mc.port2.postMessage(n)}}))}n.prototype={get name(){return this._name},postMessage:function(n){var r=this;if(this._closed){var o=new Error;throw o.name="InvalidStateError",o}var i=JSON.stringify(n),a=this._id+String(Date.now())+"$"+String(Math.random());e.localStorage.setItem(a,i),setTimeout((function(){e.localStorage.removeItem(a)}),500),t[this._id].forEach((function(e){e!==r&&e._mc.port2.postMessage(JSON.parse(i))}))},close:function(){if(!this._closed){this._closed=!0,this._mc.port1.close(),this._mc.port2.close();var e=t[this._id].indexOf(this);t[this._id].splice(e,1)}},get onmessage(){return this._mc.port1.onmessage},set onmessage(e){this._mc.port1.onmessage=e},addEventListener:function(e,t){return this._mc.port1.addEventListener.apply(this._mc.port1,arguments)},removeEventListener:function(e,t){return this._mc.port1.removeEventListener.apply(this._mc.port1,arguments)},dispatchEvent:function(e){return this._mc.port1.dispatchEvent.apply(this._mc.port1,arguments)}},e.BroadcastChannel=e.BroadcastChannel||n}(self)},102850:function(e,t,n){!function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var r=n.data("bs.collapse");if(r&&r.transitioning)return;n.collapse("hide"),r||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var i=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return i.call(this);var a=e.camelCase(["scroll",o].join("-"));this.$element.one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350)[o](this.$element[0][a])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!e.support.transition)return r.call(this);this.$element[n](0).one(e.support.transition.end,e.proxy(r,this)).emulateTransitionEnd(350)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},e.fn.collapse=function(n){return this.each((function(){var r=e(this),o=r.data("bs.collapse"),i=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);!o&&i.toggle&&"show"==n&&(n=!n),o||r.data("bs.collapse",o=new t(this,i)),"string"==typeof n&&o[n]()}))},e.fn.collapse.Constructor=t}(n(383228))},210676:function(e,t,n){var r,o,i;o=[n(730381)],void 0===(i="function"==typeof(r=function(e){return e.updateLocale("zh-tw",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysMin:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiem:function(e,t,n){var r=100*e+t;return r<900||r<1130?"Pagi":r<1230?"Siang":r<1800?"Sore":"Malam"},calendar:{sameDay:"[Hari Ini]LT",nextDay:"[Besok]LT",nextWeek:"[Minggu depan]ddddLT",lastDay:"[Kemarin]LT",lastWeek:"[Minggu lalu]ddddLT",sameElse:"L"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"Hari";case"M":return e+"Bulan";case"w":case"W":return e+"Minggu/Pekan";default:return e}},relativeTime:{future:"Dalam%s",past:"Sebelum%s",s:"Berapa detik",m:"1Menit",mm:"%dMenit",h:"1Jam",hh:"%dJam",d:"1Hari",dd:"%dHari",M:"1Bulan",MM:"%dBulan",y:"1Tahun",yy:"%dTahun"}})})?r.apply(t,o):r)||(e.exports=i)},690204:function(e,t,n){var r,o,i;o=[n(730381)],void 0===(i="function"==typeof(r=function(e){return e.updateLocale("zh-tw",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysMin:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiem:function(e,t,n){var r=100*e+t;return r<900||r<1130?"Pagi":r<1230?"Tengah hari":r<1800?"Petang":"Malam"},calendar:{sameDay:"[Hari Ini]LT",nextDay:"[Besok]LT",nextWeek:"[Minggu depan]ddddLT",lastDay:"[Kemarin]LT",lastWeek:"[Minggu lalu]ddddLT",sameElse:"L"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"Hari";case"M":return e+"Bulan";case"w":case"W":return e+"Minggu/Pekan";default:return e}},relativeTime:{future:"Dalam%s",past:"Sebelum%s",s:"Berapa saat",m:"1Minit",mm:"%dMinit",h:"1Jam",hh:"%dJam",d:"1Hari",dd:"%dHari",M:"1Bulan",MM:"%dBulan",y:"1Tahun",yy:"%dTahun"}})})?r.apply(t,o):r)||(e.exports=i)},736650:function(e,t,n){var r,o,i;o=[n(730381)],void 0===(i="function"==typeof(r=function(e){return e.updateLocale("th-th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"},ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})})?r.apply(t,o):r)||(e.exports=i)},496e3:function(e,t,n){var r,o,i;o=[n(730381)],void 0===(i="function"==typeof(r=function(e){return e.updateLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()-t.unix()>=604800?"[下]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},lastWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()<t.unix()?"[上]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},sameElse:"L"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})})?r.apply(t,o):r)||(e.exports=i)},796130:function(e,t,n){var r,o,i;o=[n(730381)],void 0===(i="function"==typeof(r=function(e){return e.updateLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(e,t,n){var r=100*e+t;return r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1分鐘",mm:"%d分鐘",h:"1小時",hh:"%d小時",d:"1天",dd:"%d天",M:"1個月",MM:"%d個月",y:"1年",yy:"%d年"}})})?r.apply(t,o):r)||(e.exports=i)},565639:function(e,t,n){!function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one(e.support.transition.end,(function(){n=!0}));return setTimeout((function(){n||e(r).trigger(e.support.transition.end)}),t),this},e((function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}()}))}(n(383228))},856644:function(e,t,n){var r,o,i;!function(a){"use strict";o=[n(261139),n(751474)],void 0===(i="function"==typeof(r=function(e,t){t=t.default||t;var n="Sortable:ng-sortable";e.module("ng-sortable",[]).constant("ngSortableVersion","0.4.1").constant("ngSortableConfig",{}).directive("ngSortable",["$parse","ngSortableConfig",function(r,o){var i,a;function s(e){return e.getAttribute("ng-repeat")||e.getAttribute("data-ng-repeat")||e.getAttribute("x-ng-repeat")||e.getAttribute("dir-paginate")}return{restrict:"AC",scope:{ngSortable:"=?"},priority:1001,compile:function(l,c){var u=[].filter.call(l[0].childNodes,(function(e){return e.nodeType===Node.ELEMENT_NODE&&s(e)}))[0];if(u){var d=s(u).match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(d){var p=d[2];return function(s,l){var c,u,d=r(p),f=function(){return d(s.$parent)||[]},g=l[0],m=e.extend(s.ngSortable||{},o),h=[];function v(e,t){var n="on"+e.type.charAt(0).toUpperCase()+e.type.substr(1),r=f();m[n]&&m[n]({model:t||r[e.newIndex],models:r,oldIndex:e.oldIndex,newIndex:e.newIndex,originalEvent:e})}function b(r){var o=f();if(o){var l=r.oldIndex,c=r.newIndex;if(g!==r.from){var d=r.from[n]();i=d[l],t.active&&"clone"===t.active.lastPullMode?(i=e.copy(i),d.splice(t.utils.index(r.clone,u.options.draggable),0,d.splice(l,1)[0]),r.from.contains(r.clone)&&r.from.removeChild(r.clone)):d.splice(l,1),o.splice(c,0,i),r.from.insertBefore(r.item,a)}else o.splice(c,0,o.splice(l,1)[0]),a.nodeType===Node.COMMENT_NODE&&r.from.insertBefore(a,r.item.nextSibling);s.$apply()}}function y(){c(),e.forEach(h,(function(e){e()})),u.destroy(),g[n]=null,g=null,h=null,u=null,a=null}g[n]=f,1===g.nodeType&&(u=t.create(g,Object.keys(m).reduce((function(e,t){return e[t]=e[t]||m[t],e}),{onStart:function(e){a=e.from===e.item.parentNode?e.item.nextSibling:e.clone.nextSibling,v(e),s.$apply()},onEnd:function(e){v(e,i),s.$apply()},onAdd:function(e){b(e),v(e,i),s.$apply()},onUpdate:function(e){b(e),v(e)},onRemove:function(e){v(e,i)},onSort:function(e){v(e)}})),e.forEach(["sort","disabled","draggable","handle","animation","group","ghostClass","filter","onStart","onEnd","onAdd","onUpdate","onRemove","onSort","onMove","onClone","setData","delay","animation","forceFallback"],(function(e){h.push(s.$watch("ngSortable."+e,(function(t){void 0!==t&&(m[e]=t,/^on[A-Z]/.test(e)||u.option(e,t))})))})),c=s.$on("$destroy",y))}}}}}}])})?r.apply(t,o):r)||(e.exports=i)}()},667089:function(e,t,n){n(261139).module("stringFormat",[]).filter("format",(function(){return function(e,t){return t&&t.length&&e?function(e,t,n){for(var r="",o=0;;){var i=t.indexOf("{",o),a=t.indexOf("}",o);if(i<0&&a<0){r+=t.slice(o);break}if(a>0&&(a<i||i<0)){if("}"!==t.charAt(a+1))throw new Error("format stringFormatBraceMismatch");r+=t.slice(o,a+1),o=a+2}else if(r+=t.slice(o,i),o=i+1,"{"!==t.charAt(o)){if(a<0)throw new Error("format stringFormatBraceMismatch");var s=t.substring(o,a),l=s.indexOf(":"),c=parseInt(l<0?s:s.substring(0,l),10);if(isNaN(c))throw new Error("format stringFormatInvalid");var u=l<0?"":s.substring(l+1),d=n[c];null==d&&(d=""),d.toFormattedString?r+=d.toFormattedString(u):e&&d.localeFormat?r+=d.localeFormat(u):d.format?r+=d.format(u):r+=d.toString(),o=a+1}else r+="{",o++}return r}(!1,e,t):e}}))}}]);