(self.webpackChunklms=self.webpackChunklms||[]).push([[15974],{969658:function(e,t,r){var n=r(383228),a=r(496486);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(66992),r(788674),r(132023),r(115306),r(333948),r(83954),e.exports=function(){return{create(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all([r.e(36318),r.e(67724)]).then(r.bind(r,105662)).then((function(i){var o,u,l,c,m;return o=i.default,u=s(s({},o.i18n["zh-CN"]),{},{fill:"填空格",fill_circle:"填空格",entry:"词条",linkEntry:"关联词条",entryText:"词条文字",selectEntry:"词条名",selectEntryPlaceholder:"请选择词条",activity:"学习活动",superscript:"上角标",subscript:"下角标",ok:"确定",embed:"音视频链接",clean:"清除格式",aiOptimize:"智能优化文本",aiOptimizePlaceholder:"可以用AI辅助润色描述"}),l=s(s({},o.i18n["en-US"]),{},{fill:"Add Blank",fill_circle:"Add Blank",entry:"Entry",linkEntry:"Link Entry",entryText:"Entry Text",selectEntry:"Select Entry",selectEntryPlaceholder:"Please select an entry",activity:"Activity",superscript:"Superscript",subscript:"Subscript",ok:"Ok",embed:"Embed Video",clean:"清除格式",aiOptimize:"Intelligently optimize text",aiOptimizePlaceholder:"AI can be used to assist in polishing and describing"}),m={"zh-CN":u,"zh-TW":c={blockquote:"引用",bold:"加粗文字",code:"插入程式碼",color:"文字顏色",coloredText:"彩色文字",hr:"分隔線",image:"插入圖片",externalImage:"外鏈圖片",uploadImage:"上傳圖片",uploadFailed:"上傳失敗了",uploadError:"上傳出錯了",imageUrl:"圖片地址",imageSize:"圖片尺寸",imageAlt:"圖片描述",restoreImageSize:"還原圖片尺寸",uploading:"正在上傳",indent:"向右縮進",outdent:"向左縮進",italic:"斜體文字",link:"插入連結",text:"文本",linkText:"連結文字",linkUrl:"網址",linkTarget:"連結方式",openLinkInCurrentWindow:"在目前視窗中打開",openLinkInNewWindow:"在新視窗中打開",removeLink:"移除連結",ol:"有序列表",ul:"無序列表",strikethrough:"刪除線文字",fontScale:"字體大小",fontScaleXLarge:"超大字體",fontScaleLarge:"大號字體",fontScaleNormal:"正常大小",fontScaleSmall:"小號字體",fontScaleXSmall:"超小字體",table:"表格",deleteRow:"刪除列",insertRowAbove:"在上面插入列",insertRowBelow:"在下面插入列",deleteColumn:"刪除欄",insertColumnLeft:"在左邊插入欄",insertColumnRight:"在右邊插入欄",deleteTable:"刪除表格",title:"標題",normalText:"普通文本",underline:"下劃線文字",alignment:"水平對齊",alignCenter:"居中",alignLeft:"居左",alignRight:"居右",selectLanguage:"選擇程序語言",audio:"插入音訊",embed:"影音連結",noAudioResource:"無法播放，檔案遺失或轉碼中",fill:"填空格",fill_circle:"填空格",entry:"詞條",linkEntry:"關聯詞條",entryText:"詞條文字",selectEntry:"詞條名",selectEntryPlaceholder:"請選擇詞條",activity:"學習活動",superscript:"上角標",subscript:"下角標",ok:"確定",clean:"Clear formatting",aiOptimize:"智能優化文字",aiOptimizePlaceholder:"可以用AI輔助潤色描述"},"zh-MO":c,"en-US":l,"en-GB":l,"th-TH":{blockquote:"อ้างอิง",bold:"ข้อความตัวหนา",code:"ใส่รหัส",color:"สีข้อความ",coloredText:"ข้อความสี",hr:"ตัวแบ่ง",image:"ใส่รูปภาพ",externalImage:"ลิงค์รูปภาพภายนอก",uploadImage:"อัพโหลดภาพ",uploadFailed:"การอัพโหลดล้มเหลว",uploadError:"การอัพโหลดผิดพลาด",imageUrl:"ที่อยู่รูปภาพ",imageSize:"ขนาดรูปภาพ",imageAlt:"คำอธิบายภาพ",restoreImageSize:"คืนค่าขนาดภาพ",uploading:"กำลังอัพโหลด",indent:"เยื้องขวา",outdent:"เยื้องซ้าย",italic:"ตัวเอียง",link:"ใส่ลิงค์",linkText:"ข้อความลิงค์",linkUrl:"ที่อยู่ลิงค์",linkTarget:"เป้าหมาย",openLinkInCurrentWindow:"เปิดในหน้าต่างปัจจุบัน",openLinkInNewWindow:"เปิดหน้าต่างใหม่",removeLink:"ลบลิงค์",ol:"รายการสั่งซื้อ",ul:"รายการไม่เรียงลำดับ",strikethrough:"ข้อความขีดทับ",table:"ตาราง",deleteRow:"ลบแถว",insertRowAbove:"แทรกแถวด้านบน",insertRowBelow:"แทรกแถวด้านล่าง",deleteColumn:"ลบคอลัมน์",insertColumnLeft:"เพิ่มคอลัมน์ด้านซ้าย",insertColumnRight:"เพิ่มคอลัมน์ด้านขวา",deleteTable:"ลบตาราง",title:"หัวเรื่อง",normalText:"ข้อความปกติ",underline:"ขีดเส้นใต้ข้อความ",alignment:"จัดตำแหน่ง",alignCenter:"จัดอยู่ตรงกลาง",alignLeft:"เยื้องซ้าย",alignRight:"เยื้องขวา",selectLanguage:"เลือกภาษา",fontScale:"ขนาดตัวอักษร",fontScaleXLarge:"ขนาดตัวอักษรใหญ่มาก",fontScaleLarge:"ขนาดตัวอักษรใหญ่",fontScaleNormal:"ขนาดตัวอักษรปกติ",fontScaleSmall:"ขนาดตัวอักษรเล็ก",fontScaleXSmall:"ขนาดตัวอักษรเล็กมาก",embed:"ลิงค์",fill:"เพิ่มช่องว่าง",fill_circle:"เพิ่มช่องว่าง",entry:"เข้า",linkEntry:"ลิงค์เข้า",entryText:"ข้อความเข้า",selectEntry:"เลือกเข้า",selectEntryPlaceholder:"โปรดเลือกเข้า",activity:"กิจกรรม",superscript:"ตัวยก",subscript:"ตัวห้อย",ok:"ส่ง",clean:"ล้างรูปแบบ",aiOptimize:"ปรับปรุงข้อความอย่างชาญฉลาด",aiOptimizePlaceholder:"สามารถใช้ AI เพื่อช่วยในการปรับปรุงคำอธิบาย"},"id-ID":{blockquote:"Kutip",bold:"Teks Tebal",code:"Sisipkan Kode",color:"Warna Teks",coloredText:"Teks Berwarna",hr:"Garis Pemisah",image:"Sisipkan Gambar",externalImage:"Gambar dari Tautan Eksternal",uploadImage:"Unggah Gambar",uploadFailed:"Unggah Gagal",uploadError:"Upload Gagal",imageUrl:"Alamat Gambar",imageSize:"Ukuran Gambar",imageAlt:"Deskripsi Gambar",restoreImageSize:"Kembalikan Ukuran Asli Gambar",uploading:"Sedang Mengunggah",indent:"Indentasi Kanan",outdent:"Indentasi Kiri",italic:"Teks Miring",link:"Sisipkan Tautan",text:"Teks",linkText:"Teks Tautan",linkUrl:"URL",linkTarget:"Metode Tautan",openLinkInCurrentWindow:"Buka di Jendela Saat Ini",openLinkInNewWindow:"Buka di Jendela Baru",removeLink:"Hapus Tautan",ol:"Daftar Terurut",ul:"Daftar Tak Terurut",strikethrough:"Tandai Teks Tergaris",fontScale:"Ukuran Font",fontScaleXLarge:"Font Besar",fontScaleLarge:"Font Besar",fontScaleNormal:"Ukuran Normal",fontScaleSmall:"Font Kecil",fontScaleXSmall:"Fon Sangat Kecil",table:"Tabel",deleteRow:"Hapus Baris",insertRowAbove:"Sisipkan Baris di Atas",insertRowBelow:"Sisipkan Baris di Bawah",deleteColumn:"Hapus Kolom",insertColumnLeft:"Sisipkan Kolom di Kiri",insertColumnRight:"Sisipkan Kolom di Kanan",deleteTable:"Hapus Tabel",title:"Tajuk",normalText:"Teks Biasa",underline:"Teks Garis Bawah",alignment:"Pengaturan Posisi Horizontal",alignCenter:"Tengah",alignLeft:"Kiri",alignRight:"Kanan",selectLanguage:"Pilih Bahasa Program",audio:"Sisipkan Audio",embed:"Tautan Media",noAudioResource:"Tidak dapat memutar, file hilang atau dalam proses pengkodean",fill:"Isi kekosongan",fill_circle:"Isi kekosongan",entry:"Istilah",linkEntry:"Istilah Terkait",entryText:"Teks Istilah",selectEntry:"Nama Istilah",selectEntryPlaceholder:"Silakan Pilih Istilah",activity:"Kegiatan Belajar",superscript:"Atas",subscript:"Bawah",ok:"Pastikan",clean:"Hapus Format",aiOptimize:"Mengoptimalkan teks secara cerdas",aiOptimizePlaceholder:"Dapat menggunakan AI untuk membantu mengoptimalkan deskripsi"},"ms-MY":{blockquote:"Petikan",bold:"Teks Tebal",code:"Masukkan Kod",color:"Warna Teks",coloredText:"Teks Berwarna",hr:"Garis Pemisah",image:"Masukkan Gambar",externalImage:"Gambar Pautan Luar",uploadImage:"Muat Naik Gambar",uploadFailed:"Muat Naik Gagal",uploadError:"Ralat Muat Naik",imageUrl:"Alamat Gambar",imageSize:"Saiz Gambar",imageAlt:"Huraian Gambar",restoreImageSize:"Pulihkan Saiz Gambar",uploading:"Sedang Dimuat Naik",indent:"Perenggan Kanan",outdent:"Perenggan Kiri",italic:"Teks Italik",link:"Masukkan Pautan",text:"Teks",linkText:"Teks Pautan",linkUrl:"Pautan URL",linkTarget:"Cara Pautan",openLinkInCurrentWindow:"Buka Dalam Tetingkap Semasa",openLinkInNewWindow:"Buka Dalam Tetingkap Baru",removeLink:"Buang Pautan",ol:"Senarai Bertatahkan",ul:"Senarai Tidak Bertatahkan",strikethrough:"Teks Garis Tengah",fontScale:"Saiz Fon",fontScaleXLarge:"Fon Sangat Besar",fontScaleLarge:"Font Besar",fontScaleNormal:"Saiz Normal",fontScaleSmall:"Font Kecil",fontScaleXSmall:"Fon Sangat Kecil",table:"Jadual",deleteRow:"Padam Baris",insertRowAbove:"Masukkan Baris Di Atas",insertRowBelow:"Masukkan Baris Di Bawah",deleteColumn:"Padam Lajur",insertColumnLeft:"Masukkan Lajur Kiri",insertColumnRight:"Masukkan Lajur Kanan",deleteTable:"Padam Jadual",title:"Tajuk",normalText:"Teks biasa",underline:"Teks dengan garisan bawah",alignment:"Penjajaran mendatar",alignCenter:"Pusat",alignLeft:"Kiri",alignRight:"Kanan",selectLanguage:"Pilih bahasa program",audio:"Sisip bunyi",embed:"Pautan audio / video",noAudioResource:"Tidak dapat disiarkan, fail itu tiada atau sedang ditranskodkan",fill:"Isi kristal",fill_circle:"Isi kristal",entry:"kemasukan",linkEntry:"Kemasukan berkaitan",entryText:"Teks kemasukan",selectEntry:"Nama Kemasukan",selectEntryPlaceholder:"Sila pilih kemasukan",activity:"aktiviti pembelajaran",superscript:"Label sudut atas",subscript:"Label sudut bawah",ok:"Pasti",clean:"Padamkan format",aiOptimize:"Mengoptimumkan teks secara pintar",aiOptimizePlaceholder:"Boleh menggunakan AI untuk membantu mengoptimumkan penerangan"},"vi-VN":s(s({},o.i18n["vi-VN"]),{},{fill:"Thêm chỗ trống",fill_circle:"Thêm chỗ trống",entry:"Mục nhập",linkEntry:"Liên kết mục nhập",entryText:"Văn bản mục nhập",selectEntry:"Chọn mục nhập",selectEntryPlaceholder:"Vui lòng chọn một mục nhập",activity:"Hoạt động",superscript:"Chỉ số trên",subscript:"Chỉ số dưới",ok:"Đồng ý",embed:"Nhúng video",clean:"Xóa định dạng",aiOptimize:"Tối ưu văn bản bằng AI",aiOptimizePlaceholder:"AI có thể hỗ trợ chỉnh sửa và mô tả nội dung"})},o.locale=function(e){var t=n("html").attr("lang");return t&&e[t]?t:"en-US"}(m),o.i18n=m,function(e,t){var i,s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u="object"==typeof t?t:"".concat(t," textarea"),l=["clean","title","bold","italic","underline","strikethrough","fontScale","color","ol","ul","blockquote","code","table","link","lmsimage","hr","indent","outdent","superscript","subscript"],c={textarea:n(u),toolbar:l,toolbarFloat:!1,defaultImage:r(252940),imageButton:!1,tabIndent:!1},m=e=>1===e.length&&"code"===e[0],d=e=>0===e.length;(o=a.mergeWith(c,o,((e,t)=>t))).toolbar.includes("clean")||d(o.toolbar)||m(o.toolbar)||o.toolbar.unshift("clean"),null!==(i=window.featureToggles)&&void 0!==i&&i.vocabulary||(o.toolbar=o.toolbar.filter((e=>"entry"!==e))),null!==(s=window.featureToggles)&&void 0!==s&&s.editorActivityRefer||(o.toolbar=o.toolbar.filter((e=>"activity"!==e))),o.toolbar.includes("ai-optimize")&&(o.placeholder=e._t("aiOptimizePlaceholder"));var p,b=(p=void 0,(b=class extends e{static initClass(){p=function(e){return n(e).find("a").each((function(){if(!this.hasAttribute("target")){var t=n(this).prop("outerHTML");n(this).attr("target","_blank");var r=n(this).prop("outerHTML");return e=e.replace(t,r)}})),e}}sync(){var e=super.sync(...arguments);return p(e)}}).initClass(),b),k=new b(o);return k.url_prefix=n("html").attr("host"),n("[contenteditable]").addClass("needsclick"),n(u).prop("disabled")&&n("[contenteditable]").prop("contenteditable",!1),k.on("pasting",((e,t)=>{if("function"==typeof(null==t?void 0:t.find)){var r=null==t?void 0:t.find("span.__blank__");r.length>0&&r.each((function(){n(this).removeAttr("data-id")}))}})),k}(i.default,e,t)}))}}}},704609:function(e){window.MathJax={loader:{load:["[tex]/noerrors","[tex]/mhchem","[tex]/color","[tex]/autoload","[tex]/physics"]},tex:{packages:{"[+]":["noerrors","mhchem","color","autoload","physics"]},inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{ignoreHtmlClass:"simditor|mathjax-ignore",processHtmlClass:"simditor-viewer|mathjax-process",skipHtmlTags:["script","noscript","style","textarea","pre","code"]},startup:{ready:()=>{MathJax.startup.defaultReady()}}};e.exports=function(){if(!document.querySelector('script[src="/static/js/mathjax/es5/tex-mml-svg.js"]')){var e=document.createElement("script");e.src="/static/js/mathjax/es5/tex-mml-svg.js",document.head.appendChild(e)}}},780640:function(e,t,r){var n,a=r(383228),i=r(496486),s=r(383228);r(115306);var o=r(85780),u="True"===a("#dashboardTracking").val(),l=a("#orgId").val(),c=a("#userId").attr("value"),m=a("#courseId").val(),d=Number(a("subCourseId").val())&&!Number.isNaN(Number(a("subCourseId").val()))?Number(a("subCourseId").val()):void 0,p=!("student"===(null===(n=a("#userRole").val())||void 0===n?void 0:n.toLowerCase())),b="True"===a("#enrollmentIsInstructor").val(),k="True"===a("#enrollmentIsInstructorAssistant").val(),g=a("#enrollmentRole").val();g||(g=b?"instructor":k?"instructor-assistant":"student");var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(window.globalData||window.statisticsSettings){var t=window.globalData?window.globalData:window.statisticsSettings;t.user&&(e.org_name=t.user.orgName,"None"!==t.user.orgCode&&(e.org_code=t.user.orgCode),e.user_no=t.user.userNo,e.user_name=t.user.name),t.course&&(e.course_code=t.course.courseCode,e.course_name=t.course.name,e.org_id!==e.course_org_id&&(e.org_id=t.course.orgId,e.org_name=t.course.orgName,"None"!==t.course.orgCode&&(e.org_code=t.course.orgCode))),t.dept&&(t.dept.id&&(e.dep_id=t.dept.id),e.dep_name=t.dept.name,e.dep_code=t.dept.code)}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={org_id:l,user_id:c,course_id:m,sub_course_id:d,enrollment_role:g,is_teacher:p,activity_id:null,activity_type:null,activity_name:null,module:null,action:o.Action.start,ts:(new Date).getTime(),user_agent:navigator.userAgent,mode:o.Mode.classmode,channel:o.Channel.wide_screen,target_info:{}};return(t=i.merge(t,e)).activity_type&&(t.activity_type=t.activity_type.replace(/-/,"_")),f(t),t},S={enums:o,track:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u){var t=h(e);if(t.course_id&&(t.activity_id||t.module)){var r="teaching-action";if(t.activity_type&&(r="learning-activity","research_activity"===t.activity_type&&(r="research-activity",t.activity_type=t.research_type)),window.st.isCanTrack()){var n=statisticsSettings.server+"/api/"+r;return s.ajax({method:"POST",url:n,dataType:"json",processData:!1,data:JSON.stringify(t),contentType:"application/json; charset=utf-8"})}}}},trackVisit:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.st.inPage(t),window.st.setActivityType(e),window.st.trackVisit()},trackZhiyunVisit:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.st.trackZhiyunVisit(e,t)},reset:function(){return window.st.reset()},trackData:h,addExtraData:f,trackActivity:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};window.st.track(e,t,r,n)},trackVtrsVisit:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"view",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};window.st.trackVtrsVisit(e,t,r)},trackVtrsResource:function(e,t,r){window.st.trackVtrsResource(e,t,r)}};e.exports=S,window.statistics=S},863322:function(e,t,r){"use strict";r.d(t,{Z:function(){return j}});var n=r(370538),a=r(420629),i={state:()=>({isLoading:!0,courseId:null,courseName:null,currentUser:{id:null,userNo:null,role:null}}),actions:{setCourseInfo(e,t){(0,e.commit)("setCourseInfo",t)},setCurrentUser(e,t){(0,e.commit)("setCurrentUser",t)}},getters:{},mutations:{setCourseInfo(e,t){var r=t.courseId,n=t.courseName;e.courseId=r,e.courseName=n},setCurrentUser(e,t){var r=t.userId,n=t.userNo,a=t.userRole;e.currentUser.id=r,e.currentUser.userNo=n,e.currentUser.role=a}}},s=(r(66992),r(185827),r(702707),r(140561),r(470189),r(132023),r(323123),r(454747),r(333948),r(887757)),o=r.n(s),u=(r(535666),r(48496)),l=r(356264),c=r(994265),m=r(554174),d=r(693604);function p(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,a)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){p(i,n,a,s,o,"next",e)}function o(e){p(i,n,a,s,o,"throw",e)}s(void 0)}))}}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=r(678410).v4,y=(e,t)=>{var r=-1;return(r=e.submitByGroup?e.submissionsOfHomework.findIndex((e=>e.group.id===t.currentMemberId)):e.submissionsOfHomework.findIndex((e=>e.student.id===t.currentMemberId)))<0?[]:[u._.cloneDeep(e.submissionsOfHomework[r]),r]},w=()=>({homework:{},currentMarkStatus:"all",currentAttachUploads:[],currentAttachUploadId:null,currentSubmissionId:0,currentMemberId:0,currentSubmitStatuses:[],unmarkedMemberIds:new Set,currentSubmissions:[],isSkipUnmarkedPopup:!1}),C={namespaced:!0,state:w(),actions:{setHomework(e,t){(0,e.commit)("setHomework",t)},setMembers(e,t){(0,e.commit)("setMembers",t)},setMemberMarked(e,t){(0,e.commit)("setMemberMarked",t)},setCurrentSubmitStatuses(e,t){var r=e.state,n=e.commit,a=e.getters,i=e.dispatch;if(n("setCurrentSubmitStatuses",t.statuses),0!==a.filteredMembers.length){var s=a.filteredMembers.find((e=>e.id===r.currentMemberId));i("setCurrentMemberId",s?s.id:a.filteredMembers[0].id)}else i("setCurrentMemberId",0)},setCurrentMarkStatus:(e,t)=>b(o().mark((function r(){var n,a,i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.state,a=e.dispatch,i=e.commit,s=e.getters,i("setCurrentMarkStatus",t),0!==s.filteredMembers.length){r.next=6;break}return r.next=5,a("setCurrentMemberId",0);case 5:return r.abrupt("return");case 6:if(!(s.filteredMembers.findIndex((e=>e.id===n.currentMemberId))<0)){r.next=10;break}return r.next=10,a("setCurrentMemberId",s.filteredMembers[0].id);case 10:case"end":return r.stop()}}),r)})))(),setCurrentMemberId:(e,t)=>b(o().mark((function r(){var n,a,i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.dispatch,a=e.commit,i=e.getters,a("setCurrentMemberId",t),a("setUnmarkedMemberIds",i.realUnmarkedMemberIds),t){r.next=8;break}return a("setCurrentSubmissions",[]),r.next=7,n("setCurrentSubmissionId",0);case 7:return r.abrupt("return");case 8:if(!i.submitByGroup){r.next=14;break}return r.next=11,(0,m.getGroupSubmissions)(i.homeworkId,t);case 11:s=r.sent,r.next=17;break;case 14:return r.next=16,(0,m.getStudentSubmissions)(i.homeworkId,t);case 16:s=r.sent;case 17:if(a("setCurrentSubmissions",s.data.list),!(i.submissionsOfCurrentMember.length>0)){r.next=23;break}return r.next=21,n("setCurrentSubmissionId",i.submissionsOfCurrentMember[0].id);case 21:r.next=30;break;case 23:if(!i.submissionSubmitByInstructor){r.next=28;break}return r.next=26,n("setCurrentSubmissionId",i.submissionSubmitByInstructor.id);case 26:r.next=30;break;case 28:return r.next=30,n("setCurrentSubmissionId",0);case 30:case"end":return r.stop()}}),r)})))(),setCurrentAttachUploads(e,t){var r=e.commit,n=e.getters;r("setCurrentAttachUploads",[...t,...u._.map(n.currentSubmission.other_resources||[],(e=>(e.id=v(),e.isSupportMark=!1,e)))])},setSomeoneAttachUpload(e,t){(0,e.commit)("setSomeoneAttachUpload",t)},setCurrentAttachUploadId(e,t){(0,e.commit)("setCurrentAttachUploadId",t)},setCurrentSubmissionId:(e,t)=>b(o().mark((function r(){var n,a,i,s,l,c,p,b,g;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.dispatch,a=e.commit,e.getters,a("setCurrentSubmissionId",t),t){r.next=6;break}return n("setCurrentAttachUploadId",0),n("setCurrentAttachUploads",[]),r.abrupt("return");case 6:return r.next=8,(0,m.getSubmissionAttachements)(t);case 8:i=r.sent,s=u._.map(i.data.marked_attachment_infos,(e=>{var t=e.origin_upload.upload;return(t=h(h({},t),e.origin_upload)).isSupportMark=d.canEditByPdfEditor(t),t.isMarked=!u._.isEmpty(e.marked_attachment),t.marked_attachment=e.marked_attachment,t})),(l=u._.find(s,(e=>"auto-generated-pdf"===e.source)))&&(c=l.name.split("."),p=k(c,1),b=p[0],l.name=b),g=s.sort(((e,t)=>e.deleted-t.deleted)),n("setCurrentAttachUploads",g),u._.isEmpty(g)||g[0].deleted?a("setCurrentAttachUploadId",0):a("setCurrentAttachUploadId",g[0].id);case 15:case"end":return r.stop()}}),r)})))(),setCurrentSubmissions(e,t){(0,e.commit)("setCurrentSubmissions",t)},updateCurrentSubmission(e,t){var r=e.commit,n=e.getters,a=t.submission;r("updateCurrentSubmission",{submission:a,getters:n}),r("updateMemberMarkStatus",{submission:a,getters:n}),r("updateSubmissionOfHomework",{submission:a,getters:n})},updateHomeworkAnnounceMarkStatus(e,t){(0,e.commit)("updateHomeworkAnnounceMarkStatus",t)},updateMemberStatus(e,t){(0,e.commit)("updateMemberStatus",{getters:e.getters,status:t})},updateSubmissionRecommend(e,t){(0,e.commit)("updateSubmissionRecommend",{getters:e.getters,status:t})},updateSubmissionOfHomework(e,t){(0,e.commit)("updateSubmissionOfHomework",{getters:e.getters,submission:t})},setSkipUnmarkedPopupStatus(e,t){(0,e.commit)("setSkipUnmarkedPopupStatus",t)},resetState(e){(0,e.commit)("resetState")},setCurrentSubmissionUploads(e,t){var r=e.state,n=e.dispatch,a=u._.cloneDeep(r.currentSubmission);a.submission_correct.uploads=t,n("setCurrentSubmission",a)}},getters:{currentMember:(e,t)=>!u._.isEmpty(t.filteredMembers)&&e.currentMemberId?u._.find(t.filteredMembers,{id:e.currentMemberId}):{},currentSubmission:e=>!u._.isEmpty(e.currentSubmissions)&&e.currentSubmissionId?u._.find(e.currentSubmissions,{id:e.currentSubmissionId}):{},currentAttachUpload:e=>!u._.isEmpty(e.currentAttachUploads)&&e.currentAttachUploadId?u._.find(e.currentAttachUploads,{id:e.currentAttachUploadId}):{},homeworkId:e=>u._.isEmpty(e.homework)?0:e.homework.id,submitByGroup:e=>!u._.isEmpty(e.homework)&&e.homework.submit_by_group,isResubmitOpen:e=>!u._.isEmpty(e.homework)&&e.homework.is_resubmit_open,members(e,t){if(u._.isEmpty(e.homework))return[];var r={1:"submitted",2:"makeUp",3:"unsubmit",4:"askedMakeUp",5:"redo"};return u._.map(e.homework.submissions,(e=>{var n,a=u._.cloneDeep(t.submitByGroup?e.group:e.student),i=t.submitByGroup?"":"(".concat(a.user_no,")");return a.label="".concat(a.name).concat(i),a.markedSubmitted=(null===(n=a.make_up_record)||void 0===n?void 0:n.submitted)||e.submission.marked_submitted,a.memberStatus=(0,c.zo)(t.isResubmitOpen,a),a.submitStatus=r[a.status],a}))},realUnmarkedMemberIds:(e,t)=>new Set(u._.filter(t.members,(e=>"unmarked"===e.mark)).map((e=>e.id))),filteredMembers(e,t){var r=[];r="unmarked"===e.currentMarkStatus?t.members.filter((t=>e.unmarkedMemberIds.has(t.id))):"all"===e.currentMarkStatus?t.members:u._.filter(t.members,(t=>t.mark===e.currentMarkStatus));var n=e.currentSubmitStatuses.length;return 0===n||4===n?r:u._.filter(r,(t=>e.currentSubmitStatuses.includes(t.submitStatus)))},submissionsOfCurrentMember:e=>u._.filter(e.currentSubmissions,c.FR),submissionSubmitByInstructor:e=>u._.find(e.currentSubmissions,c.x7),homeworkData:e=>u._.isEmpty(e.homework)?{}:(0,l.camelizeKeys)(e.homework.data),memberMarkedCount:(e,t)=>u._.filter(t.members,(e=>"marked"===e.mark)).length,memberUnmarkedCount:(e,t)=>u._.filter(t.members,(e=>"marked"!==e.mark)).length,submissionsOfHomework:e=>u._.isEmpty(e.homework)?[]:e.homework.submissions,isLarkUpload(e,t){var r;return"LARK"===(null===(r=t.currentAttachUpload)||void 0===r?void 0:r.source)},submissionOfHomework:(e,t)=>t.submissionsOfHomework.find((r=>e.currentMemberId===(t.submitByGroup?r.group.id:r.student.id)))},mutations:{setHomework(e,t){e.homework=t},setMembers(e,t){e.members=t},setUnmarkedMemberIds(e,t){e.unmarkedMemberIds=t},setMemberMarked(e,t){var r=e.members.findIndex((e=>e.id===t));r<0||(e.members[r].markStatus="marked")},setCurrentMarkStatus(e,t){e.currentMarkStatus=t},setCurrentSubmitStatuses(e,t){e.currentSubmitStatuses=t},setCurrentMemberId(e,t){e.currentMemberId=t},setCurrentAttachUploads(e,t){t=t.sort(((e,t)=>e.deleted-t.deleted)),e.currentAttachUploads=t},setSomeoneAttachUpload(e,t){var r=e.currentAttachUploads.findIndex((e=>e.id===t.id));r<0||e.currentAttachUploads.splice(r,1,t)},setCurrentAttachUploadId(e,t){e.currentAttachUploadId=t},setCurrentSubmissionId(e,t){e.currentSubmissionId=t},setCurrentSubmissions(e,t){e.currentSubmissions=t},updateCurrentSubmission(e,t){var r=t.submission,n=t.getters;if(r.id===e.currentSubmissionId){var a=e.currentSubmissions.findIndex((e=>e.id===r.id));a<0||e.currentSubmissions.splice(a,1,h(h({},n.currentSubmission),r))}},updateHomeworkAnnounceMarkStatus(e,t){e.homework.data.is_announce_mark=t.isAnnounceMark,e.homework.data.announce_score_type=t.announceScoreType,e.homework.data.announce_score_time=t.announceScoreTime},updateMemberMarkStatus(e,t){var r=t.submission,n=t.getters;if(n.submissionsOfHomework){var a=-1;if(!((a=n.submitByGroup?n.submissionsOfHomework.findIndex((t=>t.group.id===e.currentMemberId)):n.submissionsOfHomework.findIndex((t=>t.student.id===e.currentMemberId)))<0)){var i="unmarked",s=u._.cloneDeep(n.submissionsOfHomework[a]);(u._.isEmpty(s.submission)||n.currentSubmission.is_latest_version)&&(i=(0,c.T1)(r)),n.submitByGroup?s.group.mark=i:s.student.mark=i,e.homework=u._.tap(u._.cloneDeep(e.homework),(e=>e.submissions.splice(a,1,s)))}}},updateMemberStatus(e,t){var r=t.getters,n=t.status;if(r.submissionsOfHomework){var a=k(y(r,e),2),i=a[0],s=a[1];i&&(r.submitByGroup?i.group.status=n:i.student.status=n,e.homework=u._.tap(u._.cloneDeep(e.homework),(e=>e.submissions.splice(s,1,i))))}},updateSubmissionRecommend(e,t){var r=t.getters,n=t.status;if(r.submissionsOfHomework){var a=k(y(r,e),2),i=a[0],s=a[1];i&&(i.submission.recommend=n,e.homework=u._.tap(u._.cloneDeep(e.homework),(e=>e.submissions.splice(s,1,i))))}},updateSubmissionOfHomework(e,t){var r,n=t.getters,a=t.submission;if(n.submissionsOfHomework){var i=k(y(n,e),2),s=i[0],o=i[1];if(s){if(s.submission=h(h({},null!==(r=s.submission)&&void 0!==r?r:{}),a),n.submitByGroup&&a.students){var l=a.students.reduce(((e,t)=>h(h({},e),{},{[t.id]:t})),{});s.students=s.students.map((e=>{var t,r,n;return{student:h({},e),final_score:h(h({},null!==(t=e.final_score)&&void 0!==t?t:{}),null!==(r=l[null===(n=e.student)||void 0===n?void 0:n.id])&&void 0!==r?r:{})}}))}e.homework=u._.tap(u._.cloneDeep(e.homework),(e=>e.submissions.splice(o,1,s)))}}},setSkipUnmarkedPopupStatus(e,t){e.isSkipUnmarkedPopup=t},resetState(e){var t=w();Object.keys(t).forEach((r=>{e[r]=t[r]}))}}},I=(r(788674),r(496486)),_=r.n(I),M=r(631342);function O(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,a)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){O(i,n,a,s,o,"next",e)}function o(e){O(i,n,a,s,o,"throw",e)}s(void 0)}))}}var x={namespaced:!0,state:{userCreditState:{},courseCreditState:{}},actions:{fetchCurrentUserState:e=>T(o().mark((function t(){var r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,(0,M.getCurrentUserCredits)();case 3:n=t.sent,r("setUserCreditState",n);case 5:case"end":return t.stop()}}),t)})))(),fetchCurrentCourseState:(e,t)=>T(o().mark((function r(){var n,a,i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.commit,a=t.courseId,r.next=4,(0,M.getCurrentCourseCredits)(a);case 4:i=r.sent,n("setCourseCreditState",i);case 6:case"end":return r.stop()}}),r)})))()},getters:{userRemainingCredits(e){var t;return _().isEmpty(e.userCreditState)?0:null!==(t=e.userCreditState.creditRemaining)&&void 0!==t?t:Math.max(e.userCreditState.creditAssigned-e.userCreditState.creditUsed,0)},hasRemainingCredits:(e,t)=>t.userRemainingCredits>0,courseRemainingCredits:e=>_().isEmpty(e.courseCreditState)?0:Math.max(e.courseCreditState.creditAssigned-e.courseCreditState.creditUsed,0),hasCourseRemainingCredits:(e,t)=>t.courseRemainingCredits>0},mutations:{setUserCreditState(e,t){e.userCreditState=t},setCourseCreditState(e,t){e.courseCreditState=t}}};function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}n.default.use(a.ZP);var j=new a.ZP.Store(A(A({},i),{},{modules:{homeworkMark:C,airCredit:x},strict:!1}))}}]);